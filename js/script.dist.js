!function t(e,i,o){function n(r,a){if(!i[r]){if(!e[r]){var d="function"==typeof require&&require;if(!a&&d)return d(r,!0);if(s)return s(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[r]={exports:{}};e[r][0].call(c.exports,function(t){var i=e[r][1][t];return n(i?i:t)},c,c.exports,t,e,i,o)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<o.length;r++)n(o[r]);return n}({1:[function(t){!function(){function e(){new i}var i=t("./classes/Whiteboard");e()}()},{"./classes/Whiteboard":5}],2:[function(t,e){e.exports=function(){function t(t){this.el=t}document.querySelector(".whiteboard");return t.createWithUpload=function(e){var i=document.createElement("div");i.classList.add("imageDiv");var o="./images/uploaded/";return i.style.width="200px",i.style.height="200px",i.style.backgroundImage="url("+o+e+")",new t(i)},t}()},{}],3:[function(t,e){e.exports=function(){function t(t,e,i){this.el=t,this.title=e,this.text=i,this.deleteKnop=t.querySelector(".deleteKnop"),this.deleteKnop.addEventListener("click",this.deleteClickHandler.bind(this)),this._mouseDownHandler=this.mouseDownHandler.bind(this),this._mouseMoveHandler=this.mouseMoveHandler.bind(this),this._mouseUpHandler=this.mouseUpHandler.bind(this),this.dragKnop=t.querySelector(".dragKnop"),this.dragKnop.addEventListener("mousedown",this._mouseDownHandler)}document.querySelector(".whiteboard");return t.prototype.deleteClickHandler=function(){bean.fire(this,"delete")},t.prototype.dragClickHandler=function(){bean.fire(this,"move")},t.prototype.mouseDownHandler=function(t){this.offsetX=t.offsetX,this.offsetY=t.offsetY,console.log(this),window.addEventListener("mousemove",this._mouseMoveHandler),window.addEventListener("mouseup",this._mouseUpHandler)},t.prototype.mouseMoveHandler=function(t){console.log("mouse move handler"),this.el.style.left=t.x-this.offsetX+"px",this.el.style.top=t.y-this.offsetY+"px"},t.prototype.mouseUpHandler=function(t){window.removeEventListener("mousemove",this._mouseMoveHandler),window.removeEventListener("mouseup",this._mouseUpHandler),$.ajax({type:"post",url:window.location.href,data:{item_kind:"updatePostitPosition",top:t.y-this.offsetY,left:t.x-this.offsetX,id:this.id},success:function(t){console.log(t)}})},t.createWithText=function(e,i){var o=document.createElement("div");o.classList.add("postit"),o.style.top="200px",o.style.left="150px";var n=document.createElement("h2");n.classList.add("postitTitle");var s=document.createElement("p");s.classList.add("postitText");var r=document.createElement("div");r.classList.add("topBalk");var a=document.createElement("img");a.src="./images/deleteItem.png",a.style.width="16px",a.style.height="16px",a.classList.add("right","deleteKnop");var d=document.createElement("img");d.src="./images/resize.png",d.style.width="16px",d.style.height="16px",d.classList.add("right","dragKnop"),r.appendChild(a),r.appendChild(d);var l=document.createTextNode(e),c=document.createTextNode(i);return n.appendChild(l),s.appendChild(c),o.appendChild(r),o.appendChild(n),o.appendChild(s),new t(o,e,i)},t}()},{}],4:[function(t,e){e.exports=function(){function t(){this.el=this.createForm(),e.appendChild(this.el),this.postitTitle=this.el.querySelector(".postitTitleInput"),this.postitText=this.el.querySelector(".postitTextInput"),this.inputButton=this.el.querySelector(".postitSubmitButton"),this.inputButton.addEventListener("click",this.addPostit.bind(this))}var e=document.querySelector(".whiteboard");return t.prototype.addPostit=function(t){t.preventDefault();var e=document.querySelector(".postitTitleInput").value,i=document.querySelector(".postitTextInput").value;/^\s*$/.test(e)&&/^\s*$/.test(i)?this.deleteForm():(this.deleteForm(),bean.fire(this,"create-postit",[this.postitTitle.value,this.postitText.value]))},t.prototype.deleteForm=function(){this.postitFormDiv.parentElement.removeChild(this.postitFormDiv)},t.prototype.createForm=function(){this.postitFormDiv=document.createElement("div"),this.postitFormDiv.classList.add("postit"),this.postitFormDiv.style.top="200px",this.postitFormDiv.style.left="150px";var t=document.createElement("form"),e=document.createElement("div");e.classList.add("postitInputDiv");var i=document.createElement("input");i.type="text",i.placeholder="Title",i.classList.add("postitTitleInput");var o=document.createElement("textarea");o.classList.add("postitTextInput"),o.placeholder="Content";var n=document.createElement("input");return n.type="submit",n.classList.add("postitSubmitButton"),e.appendChild(i),t.appendChild(e),t.appendChild(o),t.appendChild(n),this.postitFormDiv.appendChild(t),this.postitFormDiv},t}()},{}],5:[function(t,e){e.exports=function(){function e(){this.whiteboardPage=document.querySelector(".whiteboardpage"),this.project_id=this.whiteboardPage.getAttribute("data-projectid"),this.user_id=this.whiteboardPage.getAttribute("data-userid"),this.whiteboard=document.querySelector(".whiteboard"),this.elementDiv=document.createElement("div"),this.createPostitButton=document.querySelector(".createPostit"),this.createPostitButton.addEventListener("click",this.addPostitForm.bind(this)),this.postits=new Array,this.createImageButton=document.querySelector("input[name=uploadImage]"),this.createImageButton.addEventListener("change",this.addImageElement.bind(this)),this.imageSubmit=document.querySelector(".imageSubmit"),this.uploadedImages=new Array,this.createMembersDropdownButton=document.querySelector(".members"),this.createMembersDropdownButton.addEventListener("click",this.showDropdown),this.changeBackgroundButton=document.querySelector(".grid"),this.changeBackgroundButton.addEventListener("click",this.changeBG.bind(this)),this.clearBoardButton=document.querySelector(".clearBoard"),this.clearBoardButton.addEventListener("click",this.clearBoard.bind(this))}function i(t){event.preventDefault();var e=new FormData(document.getElementById("uploadForm")),i=this,t=t;$.ajax({url:window.location.href,type:"POST",data:e,cache:!1,file:t,whiteboard:i,processData:!1,contentType:!1,success:function(e){"undefined"==typeof e.error?o(t):console.log("ERRORS: "+e.error)},error:function(t,e){console.log("ERRORS: "+e)}})}function o(t){$.ajax({type:"post",url:window.location.href,data:{item_kind:"image",top:"200px",left:"150px",filename:t.name},success:function(){var e=new r.createWithUpload(t.name);$image=document.querySelector(".whiteboard").appendChild(e.el)}})}var n=t("./PostitForm.js"),s=t("./Postit.js"),r=t("./NewImage.js"),a=1,d=1;return e.prototype.addPostitForm=function(){var t=new n;bean.on(t,"create-postit",this.createPostItHandler.bind(this))},e.prototype.createPostItHandler=function(t,e){var i=new s.createWithText(t,e);this.postits.push(i),this.whiteboard.appendChild(i.el)&&$.ajax({type:"post",url:window.location.href,data:{title:t,text:e,item_kind:"postit",top:"200px",left:"150px"},success:function(t){console.log(t);var e=t.split("<!DOCTYPE html>");i.id=e[0]}}),bean.on(i,"delete",this.deletePostitHandler.bind(this,i))},e.prototype.deletePostitHandler=function(t){var e=this.postits.indexOf(t);e>-1&&this.postits.splice(e,1),this.whiteboard.removeChild(t.el)},e.prototype.addImageElement=function(){var t;this.createImageButton.files.length>0&&(t=this.createImageButton.files[0],0===t.type.search("image")&&this.imageSubmit.addEventListener("click",i.bind(this,t)))},e.prototype.createImageHandler=function(t){this.uploadedImage=new r.createWithUpload(t),this.whiteboard.appendChild(this.uploadedImage.el)},e.prototype.showDropdown=function(){1===a?(document.querySelector(".menu").style.display="block",a=2):(document.querySelector(".menu").style.display="none",a=1)},e.prototype.changeBG=function(){1===d?(this.whiteboard.style.backgroundImage="url(images/gridBG.jpg)",document.getElementById("changeByClick").src="images/solid-icon.png",d=2):(this.whiteboard.style.backgroundImage="",document.getElementById("changeByClick").src="images/grid.png",d=1)},e.prototype.clearBoard=function(){1!=confirm("Are you sure you want to clear the whole project?")},e}()},{"./NewImage.js":2,"./Postit.js":3,"./PostitForm.js":4}]},{},[1]);
//# sourceMappingURL=script.dist.js.map